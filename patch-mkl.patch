From ab66807952999f7c2b83af7a2bffd8bc67362ceb Mon Sep 17 00:00:00 2001
From: Maarten Arnst <maarten.arnst@uliege.be>
Date: Wed, 16 Mar 2022 11:16:54 +0100
Subject: [PATCH] Patch solves compilation error observed when linking with
 Intel One API MKL version >= 2021.

---
 packages/stokhos/src/Stokhos_SDMUtils.hpp | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

diff --git a/packages/stokhos/src/Stokhos_SDMUtils.hpp b/packages/stokhos/src/Stokhos_SDMUtils.hpp
index d93319320aa..8d02c21f9fe 100644
--- a/packages/stokhos/src/Stokhos_SDMUtils.hpp
+++ b/packages/stokhos/src/Stokhos_SDMUtils.hpp
@@ -50,9 +50,19 @@
 #include <ostream>
 
 #define DGEQP3_F77  F77_BLAS_MANGLE(dgeqp3,DGEQP3)
+
+#define NOTHROW
+#if defined(INTEL_MKL)
+    #include "mkl_version.h"
+        #if __INTEL_MKL__ >= 2021
+            #undef NOTHROW
+            #define NOTHROW noexcept
+        #endif
+#endif
+
 extern "C" {
 void DGEQP3_F77(const int*, const int*, double*, const int*, int*,
-                double*, double*, const int*, int*);
+                double*, double*, const int*, int*) NOTHROW;
 }
 
 #include "Stokhos_ConfigDefs.h"
-- 
2.32.0 (Apple Git-132)

